{"version":3,"file":"react-native-media-controls.cjs.development.js","sources":["../src/MediaControls.style.ts","../src/constants/playerStates.ts","../src/utils.ts","../src/Controls.tsx","../src/Slider.tsx","../src/Toolbar.tsx","../src/MediaControls.tsx"],"sourcesContent":["import { StyleSheet } from \"react-native\";\n\nconst white = \"#fff\";\n\nexport default StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    // backgroundColor: containerBackgroundColor,\n    backgroundColor: \"blue\",\n    bottom: 0,\n    flex: 1,\n    flexDirection: \"column\",\n    justifyContent: \"flex-end\",\n    left: 0,\n    paddingHorizontal: 20,\n    paddingVertical: 13,\n    position: \"absolute\",\n    right: 0,\n    top: 0,\n  },\n  controlsRow: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\",\n  },\n  fullScreenContainer: {\n    alignItems: \"center\",\n    alignSelf: \"stretch\",\n    justifyContent: \"center\",\n    paddingLeft: 20,\n  },\n  playButton: {\n    borderColor: \"white\",\n    height: 40,\n    width: 40,\n    backgroundColor: \"transparent\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    alignSelf: \"flex-start\",\n    marginRight: 10,\n  },\n  playIcon: {\n    height: 22,\n    resizeMode: \"contain\",\n    width: 22,\n    alignSelf: \"center\",\n  },\n  progressColumnContainer: {\n    flex: 1,\n  },\n  progressContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n  },\n  progressSlider: {\n    alignSelf: \"stretch\",\n  },\n  replayIcon: {\n    height: 20,\n    resizeMode: \"stretch\",\n    width: 25,\n    color: \"white\",\n  },\n  thumb: {\n    backgroundColor: white,\n    borderRadius: 15 / 2,\n    borderWidth: 3,\n    height: 15,\n    width: 15,\n  },\n  timeRow: {\n    alignSelf: \"stretch\",\n  },\n  timerLabel: {\n    color: white,\n    fontSize: 12,\n  },\n  timerLabelsContainer: {\n    alignSelf: \"stretch\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: -7,\n  },\n  toolbar: {\n    flexDirection: \"row\",\n    flex: 1,\n    justifyContent: \"flex-end\",\n  },\n  toolbarRow: {\n    alignItems: \"flex-start\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-start\",\n  },\n  track: {\n    borderRadius: 1,\n    height: 5,\n  },\n  controllerContainer: {\n    width: \"100%\",\n    flexDirection: \"row\",\n  },\n});\n","enum PLAYER_STATES {\n  PLAYING = 0,\n  PAUSED = 1,\n  ENDED = 2,\n}\n\nexport { PLAYER_STATES };\n","import { PLAYER_STATES } from \"./constants/playerStates\";\n\nexport const humanizeVideoDuration = (seconds: number) => {\n  const [begin, end] = seconds >= 3600 ? [11, 8] : [14, 5];\n  const date = new Date(0);\n\n  date.setSeconds(seconds);\n  return date.toISOString().substr(begin, end);\n};\n\nexport const noop = () => {};\n\nexport const getPlayerStateIcon = (playerState: PLAYER_STATES) => {\n  switch (playerState) {\n    case PLAYER_STATES.PAUSED:\n      return require(\"./assets/ic_play_new.png\");\n    case PLAYER_STATES.PLAYING:\n      return require(\"./assets/ic_pause_new.png\");\n    case PLAYER_STATES.ENDED:\n      return require(\"./assets/ic_replay.png\");\n    default:\n      return null;\n  }\n};\n\nexport const getPlayerVolume = (volume: number) => {\n  switch (volume) {\n    case 0:\n      return require(\"./assets/ic_volume_mute.png\");\n    case 0.5:\n      return require(\"./assets/ic_volume_medium.png\");\n    case 1:\n      return require(\"./assets/ic_volume_high.png\");\n  }\n};\n","import React from \"react\";\nimport { TouchableOpacity, View, Image } from \"react-native\";\nimport styles from \"./MediaControls.style\";\nimport { getPlayerStateIcon, getPlayerVolume } from \"./utils\";\nimport { Props } from \"./MediaControls\";\nimport { PLAYER_STATES } from \"./constants/playerStates\";\n\ntype ControlsProps = Pick<\n  Props,\n  \"isLoading\" | \"mainColor\" | \"playerState\" | \"onReplay\"\n> & {\n  onPause: () => void;\n  onVolumePress: () => void;\n  volume: number;\n};\n\nconst Controls = (props: ControlsProps) => {\n  const { playerState, volume, onReplay, onPause, onVolumePress } = props;\n  const icon = getPlayerStateIcon(playerState);\n  const volumeIcon = getPlayerVolume(volume);\n  const pressAction = playerState === PLAYER_STATES.ENDED ? onReplay : onPause;\n  const handleVolumeActionPress = () => {\n    onVolumePress();\n  };\n\n  const content = (\n    <View style={styles.controllerContainer}>\n      <TouchableOpacity\n        style={[styles.playButton]}\n        activeOpacity={1}\n        onPress={pressAction}\n        accessibilityLabel={\n          PLAYER_STATES.PAUSED ? \"Tap to Play\" : \"Tap to Pause\"\n        }\n        accessibilityHint=\"Plays and Pauses the Video\"\n      >\n        <Image source={icon} style={styles.playIcon} />\n      </TouchableOpacity>\n      <TouchableOpacity\n        style={[styles.playButton]}\n        onPress={handleVolumeActionPress}\n        activeOpacity={1}\n        accessibilityLabel={\n          volume === 0\n            ? \"Player muted\"\n            : volume === 0.5\n            ? \"Player volume medium\"\n            : \"Player volume high\"\n        }\n        accessibilityHint=\"Indicates player volume\"\n      >\n        <Image source={volumeIcon} style={styles.playIcon} />\n      </TouchableOpacity>\n    </View>\n  );\n\n  return <View style={[styles.controlsRow]}>{content}</View>;\n};\n\nexport { Controls };\n","import React from \"react\";\nimport { TouchableOpacity, View, Text, Image, ViewStyle } from \"react-native\";\nimport RNSlider from \"react-native-slider\";\nimport styles from \"./MediaControls.style\";\nimport { humanizeVideoDuration } from \"./utils\";\nimport { Props as MediaControlsProps } from \"./MediaControls\";\nimport { PLAYER_STATES } from \"./constants/playerStates\";\n\nexport type CustomSliderStyle = {\n  containerStyle: ViewStyle;\n  trackStyle: ViewStyle;\n  thumbStyle: ViewStyle;\n};\n\ntype Props = Pick<\n  MediaControlsProps,\n  | \"progress\"\n  | \"duration\"\n  | \"mainColor\"\n  | \"onFullScreen\"\n  | \"playerState\"\n  | \"onSeek\"\n  | \"onSeeking\"\n> & {\n  onPause: () => void;\n  customSliderStyle?: CustomSliderStyle;\n};\n\nconst fullScreenImage = require(\"./assets/ic_fullscreen.png\");\n\nconst Slider = (props: Props) => {\n  const {\n    customSliderStyle,\n    duration,\n    mainColor,\n    onFullScreen,\n    onPause,\n    progress,\n  } = props;\n\n  const containerStyle = customSliderStyle?.containerStyle || {};\n  const customTrackStyle = customSliderStyle?.trackStyle || {};\n  const customThumbStyle = customSliderStyle?.thumbStyle || {};\n\n  const dragging = (value: number) => {\n    const { onSeeking, playerState } = props;\n    onSeeking(value);\n\n    if (playerState === PLAYER_STATES.PAUSED) {\n      return;\n    }\n\n    onPause();\n  };\n\n  const seekVideo = (value: number) => {\n    props.onSeek(value);\n    onPause();\n  };\n\n  return (\n    <View\n      style={[styles.controlsRow, styles.progressContainer, containerStyle]}\n    >\n      <View style={styles.progressColumnContainer}>\n        <View style={[styles.timerLabelsContainer]}>\n          <Text style={styles.timerLabel}>\n            {humanizeVideoDuration(progress)}\n          </Text>\n          <Text style={styles.timerLabel}>\n            {humanizeVideoDuration(duration)}\n          </Text>\n        </View>\n        <RNSlider\n          style={[styles.progressSlider]}\n          onValueChange={dragging}\n          onSlidingComplete={seekVideo}\n          maximumValue={Math.floor(duration)}\n          value={Math.floor(progress)}\n          trackStyle={[styles.track, customTrackStyle]}\n          thumbStyle={[\n            styles.thumb,\n            customThumbStyle,\n            { borderColor: mainColor },\n          ]}\n          minimumTrackTintColor={mainColor}\n          disabled={false}\n          iconComponent={null}\n        />\n      </View>\n      {Boolean(onFullScreen) && (\n        <TouchableOpacity\n          style={styles.fullScreenContainer}\n          onPress={onFullScreen}\n        >\n          <Image source={fullScreenImage} />\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n};\n\nexport { Slider };\n","import React from \"react\";\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst Toolbar = ({ children }: Props) => <>{children}</>;\n\nexport { Toolbar };\n","import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Animated,\n  TouchableWithoutFeedback,\n  GestureResponderEvent,\n  ViewStyle,\n} from \"react-native\";\nimport styles from \"./MediaControls.style\";\nimport { PLAYER_STATES } from \"./constants/playerStates\";\nimport { Controls } from \"./Controls\";\nimport { Slider, CustomSliderStyle } from \"./Slider\";\nimport { Toolbar } from \"./Toolbar\";\n\nexport type Props = {\n  children?: React.ReactNode;\n  containerStyle?: ViewStyle;\n  duration: number;\n  fadeOutDelay?: number;\n  isFullScreen: boolean;\n  isLoading: boolean;\n  mainColor: string;\n  onFullScreen?: (event: GestureResponderEvent) => void;\n  onPaused: (playerState: PLAYER_STATES) => void;\n  onReplay: () => void;\n  onSeek: (value: number) => void;\n  onSeeking: (value: number) => void;\n  playerState: PLAYER_STATES;\n  progress: number;\n  showOnStart?: boolean;\n  sliderStyle?: CustomSliderStyle;\n  toolbarStyle?: ViewStyle;\n  volume: number;\n  onVolumeChange: () => void;\n};\n\nconst MediaControls = (props: Props) => {\n  const {\n    containerStyle: customContainerStyle = {},\n    duration,\n    fadeOutDelay = 5000,\n    isLoading = false,\n    mainColor = \"rgba(12, 83, 175, 0.9)\",\n    onFullScreen,\n    onReplay: onReplayCallback,\n    onSeek,\n    onSeeking,\n    playerState,\n    progress,\n    showOnStart = true,\n    sliderStyle, // defaults are applied in Slider.tsx\n    onVolumeChange,\n    volume,\n  } = props;\n  const { initialOpacity, initialIsVisible } = (() => {\n    if (showOnStart) {\n      return {\n        initialOpacity: 1,\n        initialIsVisible: true,\n      };\n    }\n\n    return {\n      initialOpacity: 0,\n      initialIsVisible: false,\n    };\n  })();\n\n  const [opacity] = useState(new Animated.Value(initialOpacity));\n  const [isVisible, setIsVisible] = useState(initialIsVisible);\n  const [isSliderVisible, setIsSliderVisible] = useState(initialIsVisible);\n\n  const fadeOutControls = (delay = 0) => {\n    Animated.timing(opacity, {\n      toValue: 0,\n      duration: 300,\n      delay,\n      useNativeDriver: false,\n    }).start(result => {\n      /* I noticed that the callback is called twice, when it is invoked and when it completely finished\n      This prevents some flickering */\n      if (result.finished) {\n        setIsVisible(false);\n      }\n    });\n  };\n\n  useEffect(() => {\n    fadeOutControls(fadeOutDelay);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleVolumePress = () => {\n    onVolumeChange();\n  };\n\n  const fadeInControls = (loop = true) => {\n    setIsVisible(true);\n    if (!isSliderVisible) {\n      setIsSliderVisible(true);\n    }\n    Animated.timing(opacity, {\n      toValue: 1,\n      duration: 300,\n      delay: 0,\n      useNativeDriver: false,\n    }).start(() => {\n      if (loop) {\n        fadeOutControls(fadeOutDelay);\n      }\n    });\n  };\n\n  const onReplay = () => {\n    fadeOutControls(fadeOutDelay);\n    onReplayCallback();\n  };\n\n  const cancelAnimation = () => opacity.stopAnimation(() => setIsVisible(true));\n\n  const onPause = () => {\n    const { playerState: pState, onPaused } = props;\n    const { PLAYING, PAUSED, ENDED } = PLAYER_STATES;\n    switch (pState) {\n      case PLAYING: {\n        cancelAnimation();\n        break;\n      }\n      case PAUSED: {\n        fadeOutControls(fadeOutDelay);\n        break;\n      }\n      case ENDED: {\n        break;\n      }\n      default: {\n        break;\n      }\n    }\n\n    const newPlayerState = playerState === PLAYING ? PAUSED : PLAYING;\n    return onPaused(newPlayerState);\n  };\n\n  const toggleControls = () => {\n    // value is the last value of the animation when stop animation was called.\n    // As this is an opacity effect, I (Charlie) used the value (0 or 1) as a boolean\n    opacity.stopAnimation((value: number) => {\n      setIsVisible(!!value);\n      return value ? fadeOutControls() : fadeInControls();\n    });\n  };\n\n  return (\n    <TouchableWithoutFeedback accessible={false} onPress={toggleControls}>\n      <Animated.View\n        style={[styles.container, customContainerStyle, { opacity }]}\n      >\n        {isVisible && (\n          <View style={[styles.container, customContainerStyle]}>\n            <Slider\n              progress={progress}\n              duration={duration}\n              mainColor={mainColor}\n              onFullScreen={onFullScreen}\n              playerState={playerState}\n              onSeek={onSeek}\n              onSeeking={onSeeking}\n              onPause={onPause}\n              customSliderStyle={sliderStyle}\n            />\n            <Controls\n              onPause={onPause}\n              onReplay={onReplay}\n              isLoading={isLoading}\n              mainColor={mainColor}\n              playerState={playerState}\n              onVolumePress={handleVolumePress}\n              volume={volume}\n            />\n          </View>\n        )}\n      </Animated.View>\n    </TouchableWithoutFeedback>\n  );\n};\n\nMediaControls.Toolbar = Toolbar;\n\nexport default MediaControls;\n"],"names":["white","StyleSheet","create","container","alignItems","backgroundColor","bottom","flex","flexDirection","justifyContent","left","paddingHorizontal","paddingVertical","position","right","top","controlsRow","width","fullScreenContainer","alignSelf","paddingLeft","playButton","borderColor","height","marginRight","playIcon","resizeMode","progressColumnContainer","progressContainer","progressSlider","replayIcon","color","thumb","borderRadius","borderWidth","timeRow","timerLabel","fontSize","timerLabelsContainer","marginBottom","toolbar","toolbarRow","track","controllerContainer","PLAYER_STATES","humanizeVideoDuration","seconds","begin","end","date","Date","setSeconds","toISOString","substr","getPlayerStateIcon","playerState","PAUSED","require","PLAYING","ENDED","getPlayerVolume","volume","Controls","props","onReplay","onPause","onVolumePress","icon","volumeIcon","pressAction","handleVolumeActionPress","content","React","View","style","styles","TouchableOpacity","activeOpacity","onPress","accessibilityLabel","accessibilityHint","Image","source","fullScreenImage","Slider","customSliderStyle","duration","mainColor","onFullScreen","progress","containerStyle","customTrackStyle","trackStyle","customThumbStyle","thumbStyle","dragging","value","onSeeking","seekVideo","onSeek","Text","RNSlider","onValueChange","onSlidingComplete","maximumValue","Math","floor","minimumTrackTintColor","disabled","iconComponent","Boolean","Toolbar","children","MediaControls","customContainerStyle","fadeOutDelay","isLoading","onReplayCallback","showOnStart","sliderStyle","onVolumeChange","initialOpacity","initialIsVisible","useState","Animated","Value","opacity","isVisible","setIsVisible","isSliderVisible","setIsSliderVisible","fadeOutControls","delay","timing","toValue","useNativeDriver","start","result","finished","useEffect","handleVolumePress","fadeInControls","loop","cancelAnimation","stopAnimation","pState","onPaused","newPlayerState","toggleControls","TouchableWithoutFeedback","accessible"],"mappings":"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"}